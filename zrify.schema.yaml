# Rime schema
# encoding: utf-8

# åŸæ–¹æ¡ˆæ¥è‡ªï¼škswsf/moran
schema:
  schema_id: zrify
  name: Î¶rify
  version: "241126"
  author:
    - è‡ªç„¶ç¢¼ç™¼æ˜äººï¼šå‘¨å¿—è¾²
    - æ–¹æ¡ˆè£½ä½œï¼šksqsf
    - ä¿®æ”¹ï¼šc3bf23
  description: |
    colemak åŒæ‹¼
  dependencies:
    - zrify_ext_en
switches:
  - name: ascii_mode
    states: [æ–‡, A]
  - name: full_shape
    states: [åŠ, å…¨]
  - name: transcription
    states: [ç®€, ç¹]
  - name: ascii_punct
    states: [Â¥, $]
  - name: emoji
    states: [ğŸ’€, ğŸ˜„]
  - name: chaifen
    states: [å­—, æ‹†]
  - options: [_key_Hide]
    states: [" âœ• "]
# wiki: https://github.com/rime/home/wiki/RimeWithSchemata#è¼¸å…¥æ³•å¼•æ“èˆ‡åŠŸèƒ½çµ„ä»¶
engine:
  processors:
    - key_binder
    - ascii_composer
    - recognizer
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
    - table_translator@custom_phrase # è‡ªå®šä¹‰çŸ­è¯­
    # - table_translator@cn_en            # ä¸­è‹±æ··è¾“
    - table_translator@english # è‹±è¯­æ··è¾“
    - lua_translator@*date_translator # æ—¶é—´ã€æ—¥æœŸã€æ˜ŸæœŸ
    - lua_translator@*lunar # å†œå†
    - lua_translator@*unicode # Unicode
    - lua_translator@*number_translator # æ•°å­—ã€é‡‘é¢å¤§å†™
    - lua_translator@*calculator # è®¡ç®—å™¨
    - lua_translator@*force_gc # æš´åŠ›GCï¼Œå°è¯•è§£å†³å°ç‹¼æ¯«é•¿æœŸä½¿ç”¨çš„å¡é¡¿
  filters:
    - lua_filter@*is_in_user_dict # ç”¨æˆ·è¯å…¸çš„è¯åŠ ä¸Šä¸€ä¸ª*
    - lua_filter@*autocap_filter # è‹±æ–‡è‡ªåŠ¨å¤§å†™
    # - lua_filter@reduce_english_filter  # é™ä½éƒ¨åˆ†è‹±è¯­å•è¯åœ¨å€™é€‰é¡¹çš„ä½ç½®
    - simplifier@chaifen
    - simplifier@transcription_cc
    - simplifier@emoji
    - simplifier
    - uniquifier
# æ—¥æœŸæ—¶é—´
date_translator:
  date: date # æ—¥æœŸï¼š 2022-11-29
  time: time # æ—¶é—´ï¼š 18:13
  week: week # æ˜ŸæœŸï¼š æ˜ŸæœŸäºŒ
  datetime: datetime # ISO 8601ï¼š 2022-11-29T18:13:11+08:00
  timestamp: timestamp # æ—¶é—´æˆ³ï¼š 1669716794
# Lua é…ç½®ï¼šå†œå†çš„è§¦å‘å…³é”®å­—
lunar: lunar # å†œå†ï¼š äºŒã€‡äºŒä¸‰å¹´å†¬æœˆäºŒå ç™¸å¯å¹´ï¼ˆå…”ï¼‰å†¬æœˆäºŒå
# ä¸»ç¿»è¯‘å™¨ ä¸­æ–‡
translator:
  dictionary: zrify.extended
  #  user_dict: dicts/userdb
  #  db_class: stabledb
  prism: zrify
  initial_quality: 1.2
  preedit_format:
    - xform/([a-z][a-z][a-z][a-z])o/$1Â°/
# æ¬¡ç¿»è¯‘å™¨ è‹±æ–‡
english:
  dictionary: zrify_ext_en
  enable_completion: true
  enable_sentence: false
  enable_user_dict: false
  initial_quality: 1.1
  enable_encoder: false
  encode_commit_history: false
  comment_format:
    - xform/.*//
# è‡ªå®šä¹‰çŸ­è¯­
custom_phrase:
  dictionary: ""
  user_dict: dicts/custom_phrases
  db_class: stabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 10
# ä¸­è‹±æ··åˆè¯æ±‡
cn_en:
  dictionary: ""
  user_dict: dicts/cn_en
  db_class: stabledb
  enable_completion: true
  enable_sentence: false
  initial_quality: 0.5
  comment_format:
    - xform/^.+$//
# ç®€ç¹è½¬æ¢
transcription_cc:
  option_name: transcription
  opencc_config: s2t.json # s2t.json | s2hk.json | s2tw.json | s2twp.json
  tips: none # è½¬æ¢æç¤º: all éƒ½æ˜¾ç¤º | char ä»…å•å­—æ˜¾ç¤º | none ä¸æ˜¾ç¤ºã€‚
# æ‹†å­—
chaifen:
  option_name: chaifen
  opencc_config: moran_chaifen.json
  tips: char
  show_in_comment: true
  comment_form:
    - "xform/-/ /"
# Emoji
emoji:
  opencc_config: emoji.json
  option_name: emoji
  tips: none
# æ ‡ç‚¹ç¬¦å·
# punctuator ä¸‹é¢æœ‰ä¸‰ä¸ªå­é¡¹ï¼š
#   full_shape å…¨è§’æ ‡ç‚¹æ˜ å°„
#   half_shape åŠè§’æ ‡ç‚¹æ˜ å°„
#   symbols    Rime çš„é¢„è®¾é…ç½®æ˜¯ä»¥ '/' å‰ç¼€å¼€å¤´è¾“å‡ºä¸€ç³»åˆ—å­—ç¬¦
punctuator:
  import_preset: symbols
# å¤„ç†ç¬¦åˆç‰¹å®šè§„åˆ™çš„è¾“å…¥ç ï¼Œå¦‚ç½‘å€ã€åæŸ¥
recognizer:
  import_preset: default # ä» default.yaml ç»§æ‰¿é€šç”¨çš„
  patterns: # å†å¢åŠ æ–¹æ¡ˆä¸“æœ‰çš„ï¼š
    punct: '^/([0-9]0?|[A-Za-z]+)$'
    unicode: "^U[a-f0-9]+" # è„šæœ¬å°†è‡ªåŠ¨è·å–ç¬¬ 2 ä¸ªå­—ç¬¦ U ä½œä¸ºè§¦å‘å‰ç¼€ï¼Œå“åº” lua_translator@unicodeï¼Œè¾“å‡º Unicode å­—ç¬¦
    number: "^R[0-9]+[.]?[0-9]*" # è„šæœ¬å°†è‡ªåŠ¨è·å–ç¬¬ 2 ä¸ªå­—ç¬¦ R ä½œä¸ºè§¦å‘å‰ç¼€ï¼Œå“åº” lua_translator@number_translatorï¼Œæ•°å­—é‡‘é¢å¤§å†™
    gregorian_to_lunar: "^N[0-9]{1,8}" # è„šæœ¬å°†è‡ªåŠ¨è·å–ç¬¬ 2 ä¸ªå­—ç¬¦ N ä½œä¸ºè§¦å‘å‰ç¼€ï¼Œå“åº” lua_translator@lunarï¼Œå…¬å†è½¬å†œå†ï¼Œè¾“å…¥ N20240115 å¾—åˆ°ã€ŒäºŒã€‡äºŒä¸‰å¹´è…Šæœˆåˆäº”ã€
    calculator: "^V.*$" # è®¡ç®—å™¨åŠŸèƒ½å¼•å¯¼
key_binder:
  import_preset: default
  custom_bindings:
    __append:
      - {when: has_menu, accept: "Tab", send: "Control+Right"}
      - {when: composing, accept: "Tab", send: "Control+Right"}
      - {when: has_menu, accept: semicolon, send: "2",}
      #  - { when: has_menu, accept: Shift+A, send_sequence: "{Control+Left}a{Control+Right}" }
      #  - { when: has_menu, accept: Shift+B, send_sequence: "{Control+Left}b{Control+Right}" }
      #  - { when: has_menu, accept: Shift+C, send_sequence: "{Control+Left}c{Control+Right}" }
      #  - { when: has_menu, accept: Shift+D, send_sequence: "{Control+Left}d{Control+Right}" }
      #  - { when: has_menu, accept: Shift+E, send_sequence: "{Control+Left}e{Control+Right}" }
      #  - { when: has_menu, accept: Shift+F, send_sequence: "{Control+Left}f{Control+Right}" }
      #  - { when: has_menu, accept: Shift+G, send_sequence: "{Control+Left}g{Control+Right}" }
      #  - { when: has_menu, accept: Shift+H, send_sequence: "{Control+Left}h{Control+Right}" }
      #  - { when: has_menu, accept: Shift+I, send_sequence: "{Control+Left}i{Control+Right}" }
      #  - { when: has_menu, accept: Shift+J, send_sequence: "{Control+Left}j{Control+Right}" }
      #  - { when: has_menu, accept: Shift+K, send_sequence: "{Control+Left}k{Control+Right}" }
      #  - { when: has_menu, accept: Shift+L, send_sequence: "{Control+Left}l{Control+Right}" }
      #  - { when: has_menu, accept: Shift+M, send_sequence: "{Control+Left}m{Control+Right}" }
      #  - { when: has_menu, accept: Shift+N, send_sequence: "{Control+Left}n{Control+Right}" }
      #  - { when: has_menu, accept: Shift+O, send_sequence: "{Control+Left}o{Control+Right}" }
      #  - { when: has_menu, accept: Shift+P, send_sequence: "{Control+Left}p{Control+Right}" }
      #  - { when: has_menu, accept: Shift+Q, send_sequence: "{Control+Left}q{Control+Right}" }
      #  - { when: has_menu, accept: Shift+R, send_sequence: "{Control+Left}r{Control+Right}" }
      #  - { when: has_menu, accept: Shift+S, send_sequence: "{Control+Left}s{Control+Right}" }
      #  - { when: has_menu, accept: Shift+T, send_sequence: "{Control+Left}t{Control+Right}" }
      #  - { when: has_menu, accept: Shift+U, send_sequence: "{Control+Left}u{Control+Right}" }
      #  - { when: has_menu, accept: Shift+V, send_sequence: "{Control+Left}v{Control+Right}" }
      #  - { when: has_menu, accept: Shift+W, send_sequence: "{Control+Left}w{Control+Right}" }
      #  - { when: has_menu, accept: Shift+X, send_sequence: "{Control+Left}x{Control+Right}" }
      #  - { when: has_menu, accept: Shift+Y, send_sequence: "{Control+Left}y{Control+Right}" }
      #  - { when: has_menu, accept: Shift+Z, send_sequence: "{Control+Left}z{Control+Right}" }
      #  - { when: has_menu, accept: Shift+BackSpace, send_sequence: "{Control+Left}{BackSpace}{Control+Right}" }
  bindings:
    __patch:
      - :/key_binder/custom_bindings?
# æ‹¼å†™è®¾å®š
speller:
  # å¦‚æœä¸æƒ³è®©ä»€ä¹ˆæ ‡ç‚¹ç›´æ¥ä¸Šå±ï¼Œå¯ä»¥åŠ åœ¨ alphabetï¼Œæˆ–è€…ç¼–è¾‘æ ‡ç‚¹ç¬¦å·ä¸ºä¸¤ä¸ªåŠä»¥ä¸Šçš„æ˜ å°„
  alphabet: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA`/
  # initials å®šä¹‰ä»…ä½œä¸ºå§‹ç çš„æŒ‰é”®ï¼Œæ’é™¤ ` è®©å•ä¸ªçš„ ` å¯ä»¥ç›´æ¥ä¸Šå±
  initials: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA
  # ç¬¬ä¸€ä½<ç©ºæ ¼>æ˜¯æ‹¼éŸ³ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼›ç¬¬äºŒä½<'>è¡¨ç¤ºå¯ä»¥æ‰‹åŠ¨è¾“å…¥å•å¼•å·æ¥åˆ†å‰²æ‹¼éŸ³ã€‚
  delimiter: " '"
  algebra:
    # ä¿®æ”¹ jv qv xv yv
    - derive/ju;/jv;/
    - derive/qu;/qv;/
    - derive/xu;/xv;/
    - derive/yu;/yv;/
    - derive|^(.+);(\w)(\w)$|$1$2$3o| # å…¨ç¢¼ YYXXo
    - derive|^(.+);(\w)(\w)$|$1$2$3/| # å…¨ç¢¼ YYXX/
    - abbrev/^(.+);(\w)(\w)$/$1$2$3/ # é™ä½ YYXX å„ªå…ˆç´š
    - derive/^(.+);(\w)(\w)$/$1$2/ # æ§‹è©å¯ä»¥ç”¨ YYX
    - derive/^(.+);(\w)(\w)$/$1/ # æ§‹è©å¯ä»¥ç”¨ YY
    - derive/^(.+);(bd|dw|df|dw|yl|rw|fs|iw)$/$1$2/ # ZRM-SPECIFIC
    - erase/^(.+);(.+)$/ # åˆªé™¤åŸå§‹ç·¨ç¢¼ä»¥åŠ é€Ÿæª¢ç´¢
# æˆ–è®¸æœ‰ç”¨
grammar:
  language: zh-hans-t-essay-bgw
  #  collocation_max_length: 4
  #  collocation_min_length: 3
